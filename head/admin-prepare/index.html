
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for k0rdent.">
      
      
        <meta name="author" content="Mirantis, Inc.">
      
      
      
        <link rel="prev" href="../admin-installation/">
      
      
        <link rel="next" href="../admin-creating-clusters/">
      
      
      <link rel="icon" href="../img/favicon-32x32.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Prepare k0rdent to create child clusters on multiple providers - Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#prepare-k0rdent-to-create-child-clusters-on-multiple-providers" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Documentation" class="md-header__button md-logo" aria-label="Documentation" data-md-component="logo">
      
  <img src="../img/k0rdent-logo-horizontal-inverted.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Prepare k0rdent to create child clusters on multiple providers
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/k0rdent/kcm" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Documentation" class="md-nav__button md-logo" aria-label="Documentation" data-md-component="logo">
      
  <img src="../img/k0rdent-logo-horizontal-inverted.svg" alt="logo">

    </a>
    Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k0rdent/kcm" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to the k0rdent docs
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    k0rdent concepts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            k0rdent concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../why-k0rdent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Why k0rdent?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k0rdent-architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    k0rdent architecture
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    QuickStarts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            QuickStarts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide-to-quickstarts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guide to Quickstarts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart-1-mgmt-node-and-cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Set up Management Node and Cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart-2-aws/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configure and Deploy to AWS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart-2-azure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configure and Deploy to Azure
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Administrator Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Administrator Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-before/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Before you start
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing k0rdent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Prepare k0rdent to create child clusters on multiple providers
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Prepare k0rdent to create child clusters on multiple providers
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#aws" class="md-nav__link">
    <span class="md-ellipsis">
      AWS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#azure" class="md-nav__link">
    <span class="md-ellipsis">
      Azure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openstack" class="md-nav__link">
    <span class="md-ellipsis">
      OpenStack
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vsphere" class="md-nav__link">
    <span class="md-ellipsis">
      vSphere
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-creating-clusters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating standalone clusters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-adopting-clusters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adopting clusters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-hosted-control-planes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hosted control planes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-troubleshooting-aws-vpcs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting AWS VPCs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-service-templates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using and creating service templates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-create-multiclusterservice/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating multi-cluster services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-kof/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    k0rdent Observability & FinOps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-upgrading-k0rdent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrading k0rdent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-credentials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    k0rdent credentials management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-rbac/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    k0rdent Role Based Access Control (RBAC)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-backup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backing up k0rdent
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-create-cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating clusters as a k0rdent user
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-create-service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating and adding services to clusters as a k0rdent user
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-enable-drift-detection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Enabling drift detection
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    k0rdent Templates Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            k0rdent Templates Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../template-intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction to k0rdent templates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../template-predefined/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Removing predefined templates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../template-byo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bring-your-own (BYO) templates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../template-aws/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Templates for Amazon Web Services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../template-azure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Templates for Azure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../template-openstack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Templates for OpenStack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../template-vsphere/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Templates for vSphere
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Known Issues
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Known Issues
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../known-issues-eks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EKS
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../glossary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Glossary
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Appendix
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Appendix
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../appendix-extend-mgmt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extended management configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../appendix-dryrun/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Understanding the dry run
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../appendix-providers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud provider credentials management in CAPI
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k0rdent-documentation-contributors-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    k0rdent documentation contributor's guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k0rdent-documentation-style-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    k0rdent documentation style guide
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#aws" class="md-nav__link">
    <span class="md-ellipsis">
      AWS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#azure" class="md-nav__link">
    <span class="md-ellipsis">
      Azure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openstack" class="md-nav__link">
    <span class="md-ellipsis">
      OpenStack
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vsphere" class="md-nav__link">
    <span class="md-ellipsis">
      vSphere
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="prepare-k0rdent-to-create-child-clusters-on-multiple-providers">Prepare k0rdent to create child clusters on multiple providers<a class="headerlink" href="#prepare-k0rdent-to-create-child-clusters-on-multiple-providers" title="Permanent link">#</a></h1>
<p>Managed clusters can be hosted on a number of different platforms. At the time of this writing, those platforms include:</p>
<ul>
<li>Amazon Web Services (EC2 and EKS)</li>
<li>Microsoft Azure (self-managed and AKS)</li>
<li>OpenStack</li>
<li>VMware</li>
</ul>
<h2 id="aws">AWS<a class="headerlink" href="#aws" title="Permanent link">#</a></h2>
<p>k0rdent can deploy managed clusters as both EC2-based Kubernetes clusters and EKS clusters. In both cases, you'll need to create the relevant credentials, and to do that you'll need to configure an IAM user. Follow these steps to make it possible to deploy to AWS:</p>
<ol>
<li>
<p>Install k0rdent</p>
<p>Follow the instructions in <a href="../admin-installation/">Install k0rdent</a> to create a management cluster with k0rdent running.</p>
</li>
<li>
<p>Install <code>clusterawsadm</code></p>
<p>k0rdent uses the Cluster API (CAPI) to marshal clouds and infrastructures. For AWS, this means using the components from the Cluster API Provider AWS (CAPA) project. <code>clusterawsadm</code>, a CLI tool created by CAPA project, helps with AWS-specific tasks such as creating IAM roles and policies, as well as credential configuration. To install clusterawsadm on Ubuntu on x86 hardware, execute these commands:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-LO<span class="w"> </span>https://github.com/kubernetes-sigs/cluster-api-provider-aws/releases/download/v2.7.1/clusterawsadm-linux-amd64
sudo<span class="w"> </span>install<span class="w"> </span>-o<span class="w"> </span>root<span class="w"> </span>-g<span class="w"> </span>root<span class="w"> </span>-m<span class="w"> </span><span class="m">0755</span><span class="w"> </span>clusterawsadm-linux-amd64<span class="w"> </span>/usr/local/bin/clusterawsadm
</code></pre></div>
</li>
<li>
<p>Configure AWS IAM</p>
<p>Next you'll need to create the IAM policies and service account k0rdent will use to take action within the AWS infrastructure. (Note that you only need to do this once.)</p>
<p>The first step is to create the IAM CloudFormation stack based on your admin user. Start by specifying the environment variables <code>clusterawsadm</code> will use as AWS credentials:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">AWS_REGION</span><span class="o">=</span>&lt;EXAMPLE_AWS_REGION&gt;
<span class="nb">export</span><span class="w"> </span><span class="nv">AWS_ACCESS_KEY_ID</span><span class="o">=</span>&lt;EXAMPLE_ACCESS_KEY_ID&gt;
<span class="nb">export</span><span class="w"> </span><span class="nv">AWS_SECRET_ACCESS_KEY</span><span class="o">=</span>&lt;EXAMPLE_SECRET_ACCESS_KEY&gt;
<span class="nb">export</span><span class="w"> </span><span class="nv">AWS_SESSION_TOKEN</span><span class="o">=</span>&lt;YOUR_SESSION_TOKEN&gt;<span class="w"> </span><span class="c1"># Optional. If you are using Multi-Factor Auth.</span>
</code></pre></div>
</li>
<li>
<p>Create the IAM CloudFormation stack</p>
<p>Now use <code>clusterawsadm</code> to create the IAM CloudFormation stack:</p>
<p><code>shell
  clusterawsadm bootstrap iam create-cloudformation-stack</code></p>
</li>
<li>
<p>Install the AWS CLI</p>
<p>With the stack in place you can create the AWS IAM user. You can do this in the UI, but it's also possible to do it from the command line using the <code>aws</code> CLI tool.  Start by installing it, if you haven't already:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>unzip
curl<span class="w"> </span><span class="s2">&quot;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&quot;</span><span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;awscliv2.zip&quot;</span><span class="w"> </span>
unzip<span class="w"> </span>awscliv2.zip<span class="w"> </span>
sudo<span class="w"> </span>./aws/install
</code></pre></div>
<p>The tool recognizes the environment variables you created earlier, so there's no need to login.</p>
</li>
<li>
<p>Check for available IPs</p>
<p>Because k0rdent has 3 availablilty zone NAT gateways, each cluster needs 3 public IPs. Unfortunately, the default
<code>EC2-VPC Elastic IPs</code> quota per region is 5, so while you likely won't have issues with a first cluster, if you try to deplay a 
second to the same region, you are likely to run into issues.  </p>
<p>You can determine how many elastic IPs are available from the command line:</p>
<p><div class="highlight"><pre><span></span><code><span class="nv">LIMIT</span><span class="o">=</span><span class="k">$(</span>aws<span class="w"> </span>ec2<span class="w"> </span>describe-account-attributes<span class="w"> </span>--attribute-names<span class="w"> </span>vpc-max-elastic-ips<span class="w"> </span>--query<span class="w"> </span><span class="s1">&#39;AccountAttributes[0].AttributeValues[0].AttributeValue&#39;</span><span class="w"> </span>--output<span class="w"> </span>text<span class="k">)</span>
<span class="nv">USED</span><span class="o">=</span><span class="k">$(</span>aws<span class="w"> </span>ec2<span class="w"> </span>describe-addresses<span class="w"> </span>--query<span class="w"> </span><span class="s1">&#39;Addresses[*].PublicIp&#39;</span><span class="w"> </span>--output<span class="w"> </span>text<span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-w<span class="k">)</span>
<span class="nv">AVAILABLE</span><span class="o">=</span><span class="k">$((</span><span class="nv">LIMIT</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">USED</span><span class="k">))</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Available Public IPs: </span><span class="nv">$AVAILABLE</span><span class="s2">&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">Available Public IPs: 5</span>
</code></pre></div></p>
<p>If you have less than 3 available public IPs, you can request an increase in your quota:</p>
<div class="highlight"><pre><span></span><code>aws<span class="w"> </span>service-quotas<span class="w"> </span>request-service-quota-increase<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--service-code<span class="w"> </span>ec2<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--quota-code<span class="w"> </span>L-0263D0A3<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--desired-value<span class="w"> </span><span class="m">20</span>
</code></pre></div>
<p>You can check on the status of your request:</p>
<p><div class="highlight"><pre><span></span><code>aws<span class="w"> </span>service-quotas<span class="w"> </span>list-requested-service-quota-change-history<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--service-code<span class="w"> </span>ec2
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">{</span>
<span class="go">    &quot;RequestedQuotas&quot;: [</span>
<span class="go">        {</span>
<span class="go">            &quot;Id&quot;: &quot;EXAMPLE_ACCESS_KEY_ID&quot;,</span>
<span class="go">            &quot;ServiceCode&quot;: &quot;ec2&quot;,</span>
<span class="go">            &quot;ServiceName&quot;: &quot;Amazon Elastic Compute Cloud (Amazon EC2)&quot;,</span>
<span class="go">            &quot;QuotaCode&quot;: &quot;L-0263D0A3&quot;,</span>
<span class="go">            &quot;QuotaName&quot;: &quot;EC2-VPC Elastic IPs&quot;,</span>
<span class="go">            &quot;DesiredValue&quot;: 20.0,</span>
<span class="go">            &quot;Status&quot;: &quot;PENDING&quot;,</span>
<span class="go">            &quot;Created&quot;: &quot;2025-02-09T02:27:01.573000-05:00&quot;,</span>
<span class="go">            &quot;LastUpdated&quot;: &quot;2025-02-09T02:27:01.956000-05:00&quot;,</span>
<span class="go">            &quot;Requester&quot;: &quot;{\&quot;accountId\&quot;:\&quot;EXAMPLE_ACCESS_KEY_ID\&quot;,\&quot;callerArn\&quot;:\&quot;arn:aws:iam::EXAMPLE_ACCESS_KEY_ID:user/nchase\&quot;}&quot;,</span>
<span class="go">            &quot;QuotaArn&quot;: &quot;arn:aws:servicequotas:EXAMPLE_AWS_REGION:EXAMPLE_ACCESS_KEY_ID:ec2/L-0263D0A3&quot;,</span>
<span class="go">            &quot;GlobalQuota&quot;: false,</span>
<span class="go">            &quot;Unit&quot;: &quot;None&quot;,</span>
<span class="go">            &quot;QuotaRequestedAtLevel&quot;: &quot;ACCOUNT&quot;</span>
<span class="go">        }</span>
<span class="go">    ]</span>
<span class="go">}</span>
</code></pre></div></p>
</li>
<li>
<p>Create the IAM user. </p>
<p>The actual <code>user-name</code> parameter is arbitrary; you can specify it as anything you like:</p>
<p><div class="highlight"><pre><span></span><code>aws<span class="w"> </span>iam<span class="w"> </span>create-user<span class="w"> </span>--user-name<span class="w"> </span>k0rdentUser
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">{</span>
<span class="go">  &quot;User&quot;: {</span>
<span class="go">    &quot;Path&quot;: &quot;/&quot;,</span>
<span class="go">    &quot;UserName&quot;: &quot;k0rdentUser&quot;,</span>
<span class="go">    &quot;UserId&quot;: &quot;EXAMPLE_USER_ID&quot;,</span>
<span class="go">    &quot;Arn&quot;: &quot;arn:aws:iam::FAKE_ARN_123:user/k0rdentUser&quot;,</span>
<span class="go">    &quot;CreateDate&quot;: &quot;2025-01-18T08:15:27+00:00&quot;</span>
<span class="go">  }</span>
<span class="go">}</span>
</code></pre></div></p>
</li>
<li>
<p>Assign the relevant policies</p>
<p>You'll need to assign the following policies to the user you just created:</p>
<p><div class="highlight"><pre><span></span><code>control-plane.cluster-api-provider-aws.sigs.k8s.io
controllers.cluster-api-provider-aws.sigs.k8s.io
nodes.cluster-api-provider-aws.sigs.k8s.io
</code></pre></div>
To do that, you'll need the ARNs for each policy.  You can get them with the <code>list-policies</code> command, as in:</p>
<p><div class="highlight"><pre><span></span><code>aws<span class="w"> </span>iam<span class="w"> </span>list-policies<span class="w"> </span>--scope<span class="w"> </span>Local
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">{</span>
<span class="go">  &quot;Policies&quot;: [</span>
<span class="go">    {</span>
<span class="go">      &quot;PolicyName&quot;: &quot;controllers-eks.cluster-api-provider-aws.sigs.k8s.io&quot;,</span>
<span class="go">      &quot;PolicyId&quot;: &quot;ANPA22CF4NNF3VUDTMH3N&quot;,</span>
<span class="go">      &quot;Arn&quot;: &quot;arn:aws:iam::FAKE_ARN_123:policy/controllers-eks.cluster-api-provider-aws.sigs.k8s.io&quot;,</span>
<span class="go">      &quot;Path&quot;: &quot;/&quot;,</span>
<span class="go">      &quot;DefaultVersionId&quot;: &quot;v1&quot;,</span>
<span class="go">      &quot;AttachmentCount&quot;: 2,</span>
<span class="go">      &quot;PermissionsBoundaryUsageCount&quot;: 0,</span>
<span class="go">      &quot;IsAttachable&quot;: true,</span>
<span class="go">      &quot;CreateDate&quot;: &quot;2025-01-01T18:47:43+00:00&quot;,</span>
<span class="go">      &quot;UpdateDate&quot;: &quot;2025-01-01T18:47:43+00:00&quot;</span>
<span class="go">    },</span>
<span class="go">    {</span>
<span class="go">      &quot;PolicyName&quot;: &quot;nodes.cluster-api-provider-aws.sigs.k8s.io&quot;,</span>
<span class="go">      &quot;PolicyId&quot;: &quot;ANPA22CF4NNF5TAKL44PU&quot;,</span>
<span class="go">      &quot;Arn&quot;: &quot;arn:aws:iam::FAKE_ARN_123:policy/nodes.cluster-api-provider-aws.sigs.k8s.io&quot;,</span>
<span class="go">      &quot;Path&quot;: &quot;/&quot;,</span>
<span class="go">      &quot;DefaultVersionId&quot;: &quot;v1&quot;,</span>
<span class="go">      &quot;AttachmentCount&quot;: 3,</span>
<span class="go">      &quot;PermissionsBoundaryUsageCount&quot;: 0,</span>
<span class="go">      &quot;IsAttachable&quot;: true,</span>
<span class="go">      &quot;CreateDate&quot;: &quot;2025-01-01T18:47:44+00:00&quot;,</span>
<span class="go">      &quot;UpdateDate&quot;: &quot;2025-01-01T18:47:44+00:00&quot;</span>
<span class="go">    },</span>
<span class="go">    {</span>
<span class="go">      &quot;PolicyName&quot;: &quot;controllers.cluster-api-provider-aws.sigs.k8s.io&quot;,</span>
<span class="go">      &quot;PolicyId&quot;: &quot;ANPA22CF4NNFVO6OHIQOE&quot;,</span>
<span class="go">      &quot;Arn&quot;: &quot;arn:aws:iam::FAKE_ARN_123:policy/controllers.cluster-api-provider-aws.sigs.k8s.io&quot;,</span>
<span class="go">      &quot;Path&quot;: &quot;/&quot;,</span>
<span class="go">      &quot;DefaultVersionId&quot;: &quot;v1&quot;,</span>
<span class="go">      &quot;AttachmentCount&quot;: 3,</span>
<span class="go">      &quot;PermissionsBoundaryUsageCount&quot;: 0,</span>
<span class="go">      &quot;IsAttachable&quot;: true,</span>
<span class="go">      &quot;CreateDate&quot;: &quot;2025-01-01T18:47:43+00:00&quot;,</span>
<span class="go">      &quot;UpdateDate&quot;: &quot;2025-01-01T18:47:43+00:00&quot;</span>
<span class="go">    },</span>
<span class="go">    {</span>
<span class="go">      &quot;PolicyName&quot;: &quot;control-plane.cluster-api-provider-aws.sigs.k8s.io&quot;,</span>
<span class="go">      &quot;PolicyId&quot;: &quot;ANPA22CF4NNFY4FJ3DA2E&quot;,</span>
<span class="go">      &quot;Arn&quot;: &quot;arn:aws:iam::FAKE_ARN_123:policy/control-plane.cluster-api-provider-aws.sigs.k8s.io&quot;,</span>
<span class="go">      &quot;Path&quot;: &quot;/&quot;,</span>
<span class="go">      &quot;DefaultVersionId&quot;: &quot;v1&quot;,</span>
<span class="go">      &quot;AttachmentCount&quot;: 2,</span>
<span class="go">      &quot;PermissionsBoundaryUsageCount&quot;: 0,</span>
<span class="go">      &quot;IsAttachable&quot;: true,</span>
<span class="go">      &quot;CreateDate&quot;: &quot;2025-01-01T18:47:43+00:00&quot;,</span>
<span class="go">      &quot;UpdateDate&quot;: &quot;2025-01-01T18:47:43+00:00&quot;</span>
<span class="go">    }</span>
<span class="go">  ]</span>
<span class="go">}</span>
</code></pre></div></p>
<p>Now you can add the policies using the <code>attach-user-policy</code> command and the ARNs you retrieved in the previous step:</p>
<div class="highlight"><pre><span></span><code>aws<span class="w"> </span>iam<span class="w"> </span>attach-user-policy<span class="w"> </span>--user-name<span class="w"> </span>k0rdentUser<span class="w"> </span>--policy-arn<span class="w"> </span>arn:aws:iam::FAKE_ARN_123:policy/controllers-eks.cluster-api-provider-aws.sigs.k8s.io
aws<span class="w"> </span>iam<span class="w"> </span>attach-user-policy<span class="w"> </span>--user-name<span class="w"> </span>k0rdentUser<span class="w"> </span>--policy-arn<span class="w"> </span>arn:aws:iam::FAKE_ARN_123:policy/controllers.cluster-api-provider-aws.sigs.k8s.io
aws<span class="w"> </span>iam<span class="w"> </span>attach-user-policy<span class="w"> </span>--user-name<span class="w"> </span>k0rdentUser<span class="w"> </span>--policy-arn<span class="w"> </span>arn:aws:iam::FAKE_ARN_123:policy/control-plane.cluster-api-provider-aws.sigs.k8s.io
aws<span class="w"> </span>iam<span class="w"> </span>attach-user-policy<span class="w"> </span>--user-name<span class="w"> </span>k0rdentUser<span class="w"> </span>--policy-arn<span class="w"> </span>arn:aws:iam::FAKE_ARN_123:policy/nodes.cluster-api-provider-aws.sigs.k8s.io
</code></pre></div>
</li>
<li>
<p>Create an access key and secret</p>
<p>To access AWS as this new user, you'll need to create an access key:</p>
<p><div class="highlight"><pre><span></span><code>aws<span class="w"> </span>iam<span class="w"> </span>create-access-key<span class="w"> </span>--user-name<span class="w"> </span>k0rdentUser<span class="w"> </span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">{</span>
<span class="go">  &quot;AccessKey&quot;: {</span>
<span class="go">    &quot;UserName&quot;: &quot;k0rdentUser&quot;,</span>
<span class="go">    &quot;AccessKeyId&quot;: &quot;EXAMPLE_ACCESS_KEY_ID&quot;,</span>
<span class="go">    &quot;Status&quot;: &quot;Active&quot;,</span>
<span class="go">    &quot;SecretAccessKey&quot;: &quot;EXAMPLE_SECRET_ACCESS_KEY&quot;,</span>
<span class="go">    &quot;CreateDate&quot;: &quot;2025-01-18T08:33:35+00:00&quot;</span>
<span class="go">  }</span>
<span class="go">}</span>
</code></pre></div></p>
</li>
<li>
<p>Create the IAM Credentials <code>Secret</code> on the k0rdent Management Cluster</p>
<p>Create a YAML file called <code>aws-cluster-identity-secret.yaml</code> and add the following text, including the <code>AccessKeyId</code> and <code>SecretAccessKey</code> you created in the previous step:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws-cluster-identity-secret</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">k0rdent.mirantis.com/component</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kcm&quot;</span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Opaque</span>
<span class="nt">stringData</span><span class="p">:</span>
<span class="w">  </span><span class="nt">AccessKeyID</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EXAMPLE_ACCESS_KEY_ID</span>
<span class="w">  </span><span class="nt">SecretAccessKey</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EXAMPLE_SECRET_ACCESS_KEY</span>
</code></pre></div>
<p>Apply the YAML to your cluster, making sure to add it to the namespace where the CAPA provider is running (currently <code>kcm-system</code>) so the controller can read it:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>aws-cluster-identity-secret.yaml<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
</li>
<li>
<p>Create the <code>AWSClusterStaticIdentity</code></p>
<p>Create the <code>AWSClusterStaticIdentity</code> object in a file named <code>aws-cluster-identity.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure.cluster.x-k8s.io/v1beta2</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AWSClusterStaticIdentity</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws-cluster-identity</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">k0rdent.mirantis.com/component</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kcm&quot;</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">secretRef</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws-cluster-identity-secret</span>
<span class="w">  </span><span class="nt">allowedNamespaces</span><span class="p">:</span>
<span class="w">    </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">      </span><span class="nt">matchLabels</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</code></pre></div>
<p>Notice that the <code>secretRef</code> references the <code>Secret</code> you created in the previous step.</p>
<p>Apply the YAML to your cluster, again adding it to the <code>kcm-system</code> namespace.</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>aws-cluster-identity.yaml<span class="w">  </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
</li>
<li>
<p>Create the Cluster Identity resource template <code>ConfigMap</code></p>
<p>Now we create Cluster Identity resource template <code>ConfigMap</code>. As in prior steps, create a YAML file called <code>aws-cluster-identity-resource-template.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws-cluster-identity-resource-template</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">k0rdent.mirantis.com/component</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kcm&quot;</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">projectsveltos.io/template</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
</code></pre></div>
<p>Note that <code>ConfigMap</code> is empty, this is expected, we don't need to template any object inside child cluster(s), but we can use that object in the future if need arises.</p>
<p>Apply the YAML to your cluster, again keeping it in the <code>kcm-system</code> namespace:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>aws-cluster-identity-resource-template.yaml<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
</li>
<li>
<p>Create the <code>Credential</code></p>
<p>Finally, create the KCM <code>Credential</code> object, making sure to reference the <code>AWSClusterStaticIdentity</code> you just created:</p>
<p><div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0rdent.mirantis.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Credential</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws-cluster-identity-cred</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Credential</span><span class="nv"> </span><span class="s">Example&quot;</span>
<span class="w">  </span><span class="nt">identityRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure.cluster.x-k8s.io/v1beta2</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AWSClusterStaticIdentity</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws-cluster-identity</span>
</code></pre></div>
Apply the YAML to your cluster, again keeping it in the <code>kcm-system</code> namespace:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>aws-cluster-identity-cred.yaml<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
</li>
<li>
<p>Deploy a cluster</p>
<p>Make sure everything is configured properly by creating a <code>ClusterDeployment</code>. Start with a YAML file specifying the <code>ClusterDeployment</code>, as in:</p>
<p><div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0rdent.mirantis.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterDeployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-aws-clusterdeployment1</span>
<span class="w w-Error">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws-standalone-cp-0-1-0</span>
<span class="w">  </span><span class="nt">credential</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws-cluster-identity-cred</span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span>
<span class="w">    </span><span class="nt">clusterLabels</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-east-2</span>
<span class="w">    </span><span class="nt">controlPlane</span><span class="p">:</span>
<span class="w">      </span><span class="nt">instanceType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">t3.small</span>
<span class="w">    </span><span class="nt">worker</span><span class="p">:</span>
<span class="w">      </span><span class="nt">instanceType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">t3.small</span>
</code></pre></div>
</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>You're giving it an arbitrary name in <code>.metadata.name</code> (<code>my-aws-clusterdeployment1</code>)</li>
<li>You're referencing the credential you created in the previous step, <code>aws-cluster-identity-cred</code>. This enables you to set up a system where users can take advantage of having access to the credentials to the AWS account without actually having those credentials in hand.</li>
<li>You need to choose a template to use for the cluster, in this case <code>aws-standalone-cp-0-1-0</code>. You can get a list of available templates using:</li>
</ul>
</div>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>clustertemplate<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">NAME                            VALID</span>
<span class="go">adopted-cluster-0-1-0           true</span>
<span class="go">aws-eks-0-1-0                   true</span>
<span class="go">aws-hosted-cp-0-1-0             true</span>
<span class="go">aws-standalone-cp-0-1-0         true</span>
<span class="go">azure-aks-0-1-0                 true</span>
<span class="go">azure-hosted-cp-0-1-0           true</span>
<span class="go">azure-standalone-cp-0-1-0       true</span>
<span class="go">openstack-standalone-cp-0-1-0   true</span>
<span class="go">vsphere-hosted-cp-0-1-0         true</span>
<span class="go">vsphere-standalone-cp-0-1-0     true</span>
</code></pre></div>
Apply the YAML to your management cluster:
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>my-aws-clusterdeployment1.yaml
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">clusterdeployment.k0rdent.mirantis.com/my-aws-clusterdeployment1 created</span>
</code></pre></div>
As before, there will be a delay as the cluster finishes provisioning. Follow the provisioning process with:
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>-n<span class="w"> </span>kcm-system<span class="w"> </span>get<span class="w"> </span>clusterdeployment.k0rdent.mirantis.com<span class="w"> </span>my-aws-clusterdeployment1<span class="w"> </span>--watch
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">NAME                        READY   STATUS</span>
<span class="go">my-aws-clusterdeployment1   True    ClusterDeployment is ready</span>
</code></pre></div>
When the cluster is <code>Ready</code>, you can access it via the kubeconfig, as in:
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>-n<span class="w"> </span>kcm-system<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>my-aws-clusterdeployment1-kubeconfig<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.value}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d<span class="w"> </span>&gt;<span class="w"> </span>my-aws-clusterdeployment1-kubeconfig.kubeconfig
<span class="nv">KUBECONFIG</span><span class="o">=</span><span class="s2">&quot;my-aws-clusterdeployment1-kubeconfig.kubeconfig&quot;</span><span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-A
</code></pre></div></p>
</li>
<li>
<p>Cleanup</p>
<p>When you've established that it's working properly, you can delete the managed cluster and its AWS objects:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>delete<span class="w"> </span>clusterdeployments<span class="w"> </span>my-aws-clusterdeployment1<span class="w"> </span>
</code></pre></div>
</li>
</ol>
<h2 id="azure">Azure<a class="headerlink" href="#azure" title="Permanent link">#</a></h2>
<p>Standalone clusters can be deployed on Azure instances. Follow these steps to make Azure clusters available to your users:</p>
<ol>
<li>
<p>Install k0rdent</p>
<p>Follow the instructions in <a href="../admin-installation/">Install k0rdent</a> to create a management cluster with k0rdent running.</p>
</li>
<li>
<p>The Azure CLI</p>
<p>The Azure CLI (<code>az</code>) is required to interact with Azure resources. You can install it on Ubuntu as follows:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-sL<span class="w"> </span>https://aka.ms/InstallAzureCLIDeb<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>bash
</code></pre></div>
</li>
<li>
<p>Log in to Azure</p>
<p>Run the <code>az login</code> command to authenticate your session with Azure:</p>
<div class="highlight"><pre><span></span><code>az<span class="w"> </span>login
</code></pre></div>
<p>Make sure that the account you're using has at least one active subscription.</p>
</li>
<li>
<p>Register resource providers</p>
<p>In order for k0rdent to deploy and manage clusters, it needs to be able to work with Azure resources such as 
compute, network, and identity. Make sure the subscription you're using has the following resource providers registered:</p>
<div class="highlight"><pre><span></span><code>Microsoft.Compute
Microsoft.Network
Microsoft.ContainerService
Microsoft.ManagedIdentity
Microsoft.Authorization
</code></pre></div>
<p>To register these providers, run the following commands in the Azure CLI:</p>
<div class="highlight"><pre><span></span><code>az<span class="w"> </span>provider<span class="w"> </span>register<span class="w"> </span>--namespace<span class="w"> </span>Microsoft.Compute
az<span class="w"> </span>provider<span class="w"> </span>register<span class="w"> </span>--namespace<span class="w"> </span>Microsoft.Network
az<span class="w"> </span>provider<span class="w"> </span>register<span class="w"> </span>--namespace<span class="w"> </span>Microsoft.ContainerService
az<span class="w"> </span>provider<span class="w"> </span>register<span class="w"> </span>--namespace<span class="w"> </span>Microsoft.ManagedIdentity
az<span class="w"> </span>provider<span class="w"> </span>register<span class="w"> </span>--namespace<span class="w"> </span>Microsoft.Authorization
</code></pre></div>
</li>
<li>
<p>Find Your Subscription ID</p>
<p>Creating a child cluster requires a structure of credentials that link to user identities on the provider system without
exposing the actual username and password to users. You can find more information on <a href="../admin-credentials/">k0rdent 
Credentials</a>, but for Azure, this involves creating an <code>AzureClusterIdentity</code> and a 
Service Principal (SP) to let CAPZ (Cluster API Azure) communicate with the cloud provider. </p>
<p>On Azure, the lowest level of this hierarchy is the subscription, which ties to your billing information for Azure. Your Azure user must have at least one subscription for you to use it with k0rdent, so if you're working with a new
account make sure to <a href="https://learn.microsoft.com/en-us/azure/cost-management-billing/manage/create-subscription">create a new subscription with billing information</a> before you start.</p>
<p>To get the information you need, list all your Azure subscriptions: </p>
<p><div class="highlight"><pre><span></span><code>az<span class="w"> </span>account<span class="w"> </span>list<span class="w"> </span>-o<span class="w"> </span>table
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">Name                     SubscriptionId                        TenantId</span>
<span class="go">-----------------------  -------------------------------------  --------------------------------</span>
<span class="go">My Azure Subscription    SUBSCRIPTION_ID_SUBSCRIPTION_ID        TENANT_ID_TENANT_ID_TENANT_ID</span>
</code></pre></div></p>
<p>Make note of the <code>SubscriptionId</code> for the subscription you want to use.</p>
</li>
<li>
<p>Create a Service Principal (SP)</p>
<p>The Service Principal is like a password-protected user that CAPZ will use to manage resources on Azure.
Create the Service Principal, making sure to replace <SUBSCRIPTION_ID_SUBSCRIPTION_ID> with the <code>SubscriptionId</code> from step 1.</p>
<p><div class="highlight"><pre><span></span><code>az<span class="w"> </span>ad<span class="w"> </span>sp<span class="w"> </span>create-for-rbac<span class="w"> </span>--role<span class="w"> </span>contributor<span class="w"> </span>--scopes<span class="o">=</span><span class="s2">&quot;/subscriptions/&lt;SUBSCRIPTION_ID_SUBSCRIPTION_ID&gt;&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">{</span>
<span class="go">&quot;appId&quot;: &quot;SP_APP_ID_SP_APP_ID&quot;,</span>
<span class="go">&quot;displayName&quot;: &quot;azure-cli-2024-10-24-17-36-47&quot;,</span>
<span class="go">&quot;password&quot;: &quot;SP_PASSWORD_SP_PASSWORD&quot;,</span>
<span class="go">&quot;tenant&quot;: &quot;SP_TENANT_SP_TENANT&quot;</span>
<span class="go">}</span>
</code></pre></div>
Note that this information provides access to your Azure account, so make sure to treat these strings 
like passwords. Do not share them or check them into a repository.</p>
</li>
<li>
<p>Use the password to create a <code>Secret</code> object</p>
<p>The <code>Secret</code> stores the <code>clientSecret</code> (password) from the Service Principal.
Save the <code>Secret</code> YAML in a file called <code>azure-cluster-identity-secret.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure-cluster-identity-secret</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">k0rdent.mirantis.com/component</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kcm&quot;</span>
<span class="nt">stringData</span><span class="p">:</span>
<span class="w">  </span><span class="nt">clientSecret</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;SP_PASSWORD_SP_PASSWORD&gt;</span><span class="w"> </span><span class="c1"># Password retrieved from the Service Principal</span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Opaque</span>
</code></pre></div>
<p>You can then apply the YAML to your cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>azure-cluster-identity-secret.yaml
</code></pre></div>
</li>
<li>
<p>Create the <code>AzureClusterIdentity</code> objects</p>
<p>The <code>AzureClusterIdentity</code> object defines the credentials CAPZ uses to manage Azure resources. 
It references the <code>Secret</code> you just created, so make sure that <code>.spec.clientSecret.name</code> matches 
the name of that <code>Secret</code>.</p>
<p>Save the following YAML into a file named <code>azure-cluster-identity.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure.cluster.x-k8s.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AzureClusterIdentity</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">clusterctl.cluster.x-k8s.io/move-hierarchy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="w">    </span><span class="nt">k0rdent.mirantis.com/component</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kcm&quot;</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure-cluster-identity</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">allowedNamespaces</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">clientID</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;SP_APP_ID_SP_APP_ID&gt;</span><span class="w"> </span><span class="c1"># The App ID retrieved from the Service Principal above in Step 2</span>
<span class="w">  </span><span class="nt">clientSecret</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure-cluster-identity-secret</span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="w">  </span><span class="nt">tenantID</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;SP_TENANT_SP_TENANT&gt;</span><span class="w"> </span><span class="c1"># The Tenant ID retrieved from the Service Principal above in Step 2</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ServicePrincipal</span>
</code></pre></div>
<p>Apply the YAML to your cluster:</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>azure-cluster-identity.yaml
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">azureclusteridentity.infrastructure.cluster.x-k8s.io/azure-cluster-identity created</span>
</code></pre></div></p>
</li>
<li>
<p>Create the k0rdent <code>Credential</code> Object</p>
<p>Create the YAML for the specification of the <code>Credential</code> and save it as <code>azure-cluster-identity-cred.yaml</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0rdent.mirantis.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Credential</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure-cluster-identity-cred</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">identityRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure.cluster.x-k8s.io/v1beta1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AzureClusterIdentity</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure-cluster-identity</span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
</code></pre></div>
<p>You're referencing the <code>AzureClusterIdentity</code> object you just created, so make sure that <code>.spec.name</code> matches 
<code>.metadata.name</code> of that object. Also, note that while the overall object's <code>kind</code> is <code>Credential</code>, the 
<code>.spec.identityRef.kind</code> must be <code>AzureClusterIdentity</code> to match that object.</p>
<p>Apply the YAML to your cluster:</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>azure-cluster-identity-cred.yaml
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">credential.k0rdent.mirantis.com/azure-cluster-identity-cred created</span>
</code></pre></div></p>
</li>
<li>
<p>Create the <code>ConfigMap</code> resource-template Object</p>
<p>Create a YAML with the specification of our resource-template and save it as
<code>azure-cluster-identity-resource-template.yaml</code></p>
<p><div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure-cluster-identity-resource-template</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">k0rdent.mirantis.com/component</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kcm&quot;</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">projectsveltos.io/template</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">configmap.yaml</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">{{- $cluster := .InfrastructureProvider -}}</span>
<span class="w">    </span><span class="no">{{- $identity := (getResource &quot;InfrastructureProviderIdentity&quot;) -}}</span>
<span class="w">    </span><span class="no">{{- $secret := (getResource &quot;InfrastructureProviderIdentitySecret&quot;) -}}</span>
<span class="w">    </span><span class="no">{{- $subnetName := &quot;&quot; -}}</span>
<span class="w">    </span><span class="no">{{- $securityGroupName := &quot;&quot; -}}</span>
<span class="w">    </span><span class="no">{{- $routeTableName := &quot;&quot; -}}</span>
<span class="w">    </span><span class="no">{{- range $cluster.spec.networkSpec.subnets -}}</span>
<span class="w">      </span><span class="no">{{- if eq .role &quot;node&quot; -}}</span>
<span class="w">        </span><span class="no">{{- $subnetName = .name -}}</span>
<span class="w">        </span><span class="no">{{- $securityGroupName = .securityGroup.name -}}</span>
<span class="w">        </span><span class="no">{{- $routeTableName = .routeTable.name -}}</span>
<span class="w">        </span><span class="no">{{- break -}}</span>
<span class="w">      </span><span class="no">{{- end -}}</span>
<span class="w">    </span><span class="no">{{- end -}}</span>
<span class="w">    </span><span class="no">{{- $cloudConfig := dict</span>
<span class="w">      </span><span class="no">&quot;aadClientId&quot; $identity.spec.clientID</span>
<span class="w">      </span><span class="no">&quot;aadClientSecret&quot; (index $secret.data &quot;clientSecret&quot; | b64dec)</span>
<span class="w">      </span><span class="no">&quot;cloud&quot; $cluster.spec.azureEnvironment</span>
<span class="w">      </span><span class="no">&quot;loadBalancerName&quot; &quot;&quot;</span>
<span class="w">      </span><span class="no">&quot;loadBalancerSku&quot; &quot;Standard&quot;</span>
<span class="w">      </span><span class="no">&quot;location&quot; $cluster.spec.location</span>
<span class="w">      </span><span class="no">&quot;maximumLoadBalancerRuleCount&quot; 250</span>
<span class="w">      </span><span class="no">&quot;resourceGroup&quot; $cluster.spec.resourceGroup</span>
<span class="w">      </span><span class="no">&quot;routeTableName&quot; $routeTableName</span>
<span class="w">      </span><span class="no">&quot;securityGroupName&quot; $securityGroupName</span>
<span class="w">      </span><span class="no">&quot;securityGroupResourceGroup&quot; $cluster.spec.networkSpec.vnet.resourceGroup</span>
<span class="w">      </span><span class="no">&quot;subnetName&quot; $subnetName</span>
<span class="w">      </span><span class="no">&quot;subscriptionId&quot; $cluster.spec.subscriptionID</span>
<span class="w">      </span><span class="no">&quot;tenantId&quot; $identity.spec.tenantID</span>
<span class="w">      </span><span class="no">&quot;useInstanceMetadata&quot; true</span>
<span class="w">      </span><span class="no">&quot;useManagedIdentityExtension&quot; false</span>
<span class="w">      </span><span class="no">&quot;vmType&quot; &quot;vmss&quot;</span>
<span class="w">      </span><span class="no">&quot;vnetName&quot; $cluster.spec.networkSpec.vnet.name</span>
<span class="w">      </span><span class="no">&quot;vnetResourceGroup&quot; $cluster.spec.networkSpec.vnet.resourceGroup</span>
<span class="w">    </span><span class="no">-}}</span>
<span class="w">    </span><span class="no">---</span>
<span class="w">    </span><span class="no">apiVersion: v1</span>
<span class="w">    </span><span class="no">kind: Secret</span>
<span class="w">    </span><span class="no">metadata:</span>
<span class="w">      </span><span class="no">name: azure-cloud-provider</span>
<span class="w">      </span><span class="no">namespace: kube-system</span>
<span class="w">    </span><span class="no">type: Opaque</span>
<span class="w">    </span><span class="no">data:</span>
<span class="w">      </span><span class="no">cloud-config: {{ $cloudConfig | toJson | b64enc }}</span>
</code></pre></div>
Object name needs to be exactly <code>azure-cluster-identity-resource-template.yaml</code>, <code>AzureClusterIdentity</code> object name + <code>-resource-template</code> string suffix.</p>
<p>Apply the YAML to your cluster:</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>azure-cluster-identity-resource-template.yaml
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">configmap/azure-cluster-identity-resource-template created</span>
</code></pre></div></p>
</li>
</ol>
<p>Now you're ready to deploy the cluster.</p>
<ol>
<li>
<p>Create a <code>ClusterDeployment</code></p>
<p>To test the configuration, deploy a child cluster by following these steps:</p>
<p>First get a list of available locations/regions:</p>
<p><div class="highlight"><pre><span></span><code>az<span class="w"> </span>account<span class="w"> </span>list-locations<span class="w"> </span>-o<span class="w"> </span>table
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">DisplayName               Name                 RegionalDisplayName</span>
<span class="go">------------------------  -------------------  -------------------------------------</span>
<span class="go">East US                   eastus               (US) East US</span>
<span class="go">South Central US          southcentralus       (US) South Central US</span>
<span class="go">West US 2                 westus2              (US) West US 2</span>
<span class="go">West US 3                 westus3              (US) West US 3</span>
<span class="go">Australia East            australiaeast        (Asia Pacific) Australia East</span>
<span class="go">. . .</span>
</code></pre></div></p>
<p>Make note of the location you want to use, such as <code>eastus</code>.</p>
<p>To create the actual child cluster, create a <code>ClusterDeployment</code> that references the appropriate template
as well as the location, credentials, and <code>subscriptionId</code>.</p>
<p>You can see the available templates by listing them:</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>clustertemplate<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">NAME                            VALID</span>
<span class="go">adopted-cluster-0-1-0           true</span>
<span class="go">aws-eks-0-1-0                   true</span>
<span class="go">aws-hosted-cp-0-1-0             true</span>
<span class="go">aws-standalone-cp-0-1-0         true</span>
<span class="go">azure-aks-0-1-0                 true</span>
<span class="go">azure-hosted-cp-0-1-0           true</span>
<span class="go">azure-standalone-cp-0-1-0       true</span>
<span class="go">openstack-standalone-cp-0-1-0   true</span>
<span class="go">vsphere-hosted-cp-0-1-0         true</span>
<span class="go">vsphere-standalone-cp-0-1-0     true</span>
</code></pre></div></p>
<p>Create the yaml:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0rdent.mirantis.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterDeployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-azure-clusterdeployment1</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure-standalone-cp-0-1-0</span>
<span class="w">  </span><span class="nt">credential</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure-cluster-identity-cred</span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span>
<span class="w">    </span><span class="nt">location</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;westus&quot;</span><span class="w"> </span><span class="c1"># Select your desired Azure Location (find it via `az account list-locations -o table`)</span>
<span class="w">    </span><span class="nt">subscriptionID</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;SUBSCRIPTION_ID_SUBSCRIPTION_ID&gt;</span><span class="w"> </span><span class="c1"># Enter the Subscription ID used earlier</span>
<span class="w">    </span><span class="nt">controlPlane</span><span class="p">:</span>
<span class="w">      </span><span class="nt">vmSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard_A4_v2</span>
<span class="w">    </span><span class="nt">worker</span><span class="p">:</span>
<span class="w">      </span><span class="nt">vmSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard_A4_v2</span>
</code></pre></div>
<p>Apply the YAML to your management cluster:</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>my-azure-clusterdeployment1.yaml
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">clusterdeployment.k0rdent.mirantis.com/my-azure-clusterdeployment1 created</span>
</code></pre></div></p>
<p>Note that although the <code>ClusterDeployment</code> object has been created, there will be a delay as actual Azure instances
are provisioned and added to the cluster. You can follow the provisioning process:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>-n<span class="w"> </span>kcm-system<span class="w"> </span>get<span class="w"> </span>clusterdeployment.k0rdent.mirantis.com<span class="w"> </span>my-azure-clusterdeployment1<span class="w"> </span>--watch
</code></pre></div>
<p>If the provisioning process continues for a more than a few minutes, check to make sure k0rdent isn't trying to
exceed your quotas. If you are near the top of your quotas, requesting an increase can "unstick" the provisioning process.</p>
<p>After the cluster is <code>Ready</code>, you can access it via the kubeconfig:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>-n<span class="w"> </span>kcm-system<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>my-azure-clusterdeployment1-kubeconfig<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.value}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d<span class="w"> </span>&gt;<span class="w"> </span>my-azure-clusterdeployment1-kubeconfig.kubeconfig
<span class="nv">KUBECONFIG</span><span class="o">=</span><span class="s2">&quot;my-azure-clusterdeployment1-kubeconfig.kubeconfig&quot;</span><span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-A
</code></pre></div>
</li>
<li>
<p>Cleanup</p>
<p>To clean up Azure resources, delete the child cluster by deleting the <code>ClusterDeployment</code>:</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>clusterdeployments<span class="w"> </span>-A
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">NAMESPACE    NAME                          READY   STATUS</span>
<span class="go">kcm-system   my-azure-clusterdeployment1   True    ClusterDeployment is ready</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>delete<span class="w"> </span>clusterdeployments<span class="w"> </span>my-azure-clusterdeployment1<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">clusterdeployment.k0rdent.mirantis.com &quot;my-azure-clusterdeployment1&quot; deleted</span>
</code></pre></div></p>
</li>
</ol>
<h2 id="openstack">OpenStack<a class="headerlink" href="#openstack" title="Permanent link">#</a></h2>
<p>k0rdent can deploy child clusters on OpenStack virtual machines. Follow these steps to configure and deploy OpenStack clusters for your users:</p>
<ol>
<li>
<p>Install k0rdent</p>
<p>Follow the instructions in <a href="../admin-installation/">Install k0rdent</a> to create a management cluster with k0rdent running.</p>
</li>
<li>
<p>OpenStack CLI (optional)</p>
<p>If you plan to access OpenStack directly, go ahead and 
<a href="https://docs.openstack.org/newton/user-guide/common/cli-install-openstack-command-line-clients.html">install the OpenStack CLI</a>.</p>
</li>
<li>
<p>Configure the OpenStack Application Credential</p>
<p>The exported list of variables should include:</p>
<div class="highlight"><pre><span></span><code>OS_AUTH_URL
OS_APPLICATION_CREDENTIAL_ID
OS_APPLICATION_CREDENTIAL_SECRET
OS_REGION_NAME
OS_INTERFACE
OS_IDENTITY_API_VERSION
OS_AUTH_TYPE
</code></pre></div>
<p>While it's possible to use a username and password instead of the Application Credential &mdash; adjust your YAML accordingly &mdash; an Application Credential is strongly recommended because it limits scope and improves security over a raw username/password approach.</p>
</li>
<li>
<p>Create the OpenStack Credentials Secret</p>
<p>Create a Kubernetes <code>Secret</code> containing the <code>clouds.yaml</code> that defines your OpenStack environment, substituting real values
where appropriate. Save this as <code>openstack-cloud-config.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openstack-cloud-config</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">k0rdent.mirantis.com/component</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kcm&quot;</span>
<span class="nt">stringData</span><span class="p">:</span>
<span class="w">  </span><span class="nt">clouds.yaml</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">clouds:</span>
<span class="w">      </span><span class="no">openstack:</span>
<span class="w">        </span><span class="no">auth:</span>
<span class="w">          </span><span class="no">auth_url: &lt;OS_AUTH_URL&gt;</span>
<span class="w">          </span><span class="no">application_credential_id: &lt;OS_APPLICATION_CREDENTIAL_ID&gt;</span>
<span class="w">          </span><span class="no">application_credential_secret: &lt;OS_APPLICATION_CREDENTIAL_SECRET&gt;</span>
<span class="w">        </span><span class="no">region_name: &lt;OS_REGION_NAME&gt;</span>
<span class="w">        </span><span class="no">interface: &lt;OS_INTERFACE&gt;</span>
<span class="w">        </span><span class="no">identity_api_version: &lt;OS_IDENTITY_API_VERSION&gt;</span>
<span class="w">        </span><span class="no">auth_type: &lt;OS_AUTH_TYPE&gt;</span>
</code></pre></div>
<p>Apply the YAML to your cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>openstack-cloud-config.yaml
</code></pre></div>
</li>
<li>
<p>Create the k0rdent Credential Object</p>
<p>Next, define a <code>Credential</code> that references the <code>Secret</code> from the previous step.
Save this as <code>openstack-cluster-identity-cred.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0rdent.mirantis.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Credential</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openstack-cluster-identity-cred</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">k0rdent.mirantis.com/component</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kcm&quot;</span><span class="w">  </span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;OpenStack</span><span class="nv"> </span><span class="s">credentials&quot;</span>
<span class="w">  </span><span class="nt">identityRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openstack-cloud-config</span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
</code></pre></div>
<p>Apply the YAML to your cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>openstack-cluster-identity-cred.yaml
</code></pre></div>
<p>Note that <code>.spec.identityRef.name</code> must match the <code>Secret</code> you created in the previous step, and 
<code>.spec.identityRef.namespace</code> must be the same as the one that includes the <code>Secret</code> (<code>kcm-system</code>).</p>
</li>
<li>
<p>Create the ConfigMap resource-template object</p>
<p>Create a YAML file with the specification of the resource-template and save it as <code>openstack-cluster-identity-resource-template.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openstack-cloud-config-resource-template</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">k0rdent.mirantis.com/component</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kcm&quot;</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">projectsveltos.io/template</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">configmap.yaml</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">{{- $cluster := .InfrastructureProvider -}}</span>
<span class="w">    </span><span class="no">{{- $identity := (getResource &quot;InfrastructureProviderIdentity&quot;) -}}</span>

<span class="w">    </span><span class="no">{{- $clouds := fromYaml (index $identity &quot;data&quot; &quot;clouds.yaml&quot; | b64dec) -}}</span>
<span class="w">    </span><span class="no">{{- if not $clouds }}</span>
<span class="w">      </span><span class="no">{{ fail &quot;failed to decode clouds.yaml&quot; }}</span>
<span class="w">    </span><span class="no">{{ end -}}</span>

<span class="w">    </span><span class="no">{{- $openstack := index $clouds &quot;clouds&quot; &quot;openstack&quot; -}}</span>

<span class="w">    </span><span class="no">{{- if not (hasKey $openstack &quot;auth&quot;) }}</span>
<span class="w">      </span><span class="no">{{ fail &quot;auth key not found in openstack config&quot; }}</span>
<span class="w">    </span><span class="no">{{- end }}</span>
<span class="w">    </span><span class="no">{{- $auth := index $openstack &quot;auth&quot; -}}</span>

<span class="w">    </span><span class="no">{{- $auth_url := index $auth &quot;auth_url&quot; -}}</span>
<span class="w">    </span><span class="no">{{- $app_cred_id := index $auth &quot;application_credential_id&quot; -}}</span>
<span class="w">    </span><span class="no">{{- $app_cred_name := index $auth &quot;application_credential_name&quot; -}}</span>
<span class="w">    </span><span class="no">{{- $app_cred_secret := index $auth &quot;application_credential_secret&quot; -}}</span>

<span class="w">    </span><span class="no">{{- $network_id := $cluster.status.externalNetwork.id -}}</span>
<span class="w">    </span><span class="no">{{- $network_name := $cluster.status.externalNetwork.name -}}</span>
<span class="w">    </span><span class="no">---</span>
<span class="w">    </span><span class="no">apiVersion: v1</span>
<span class="w">    </span><span class="no">kind: Secret</span>
<span class="w">    </span><span class="no">metadata:</span>
<span class="w">      </span><span class="no">name: openstack-cloud-config</span>
<span class="w">      </span><span class="no">namespace: kube-system</span>
<span class="w">    </span><span class="no">type: Opaque</span>
<span class="w">    </span><span class="no">stringData:</span>
<span class="w">      </span><span class="no">cloud.conf: |</span>
<span class="w">        </span><span class="no">[Global]</span>
<span class="w">        </span><span class="no">auth-url=&quot;{{ $auth_url }}&quot;</span>

<span class="w">        </span><span class="no">{{- if $app_cred_id }}</span>
<span class="w">        </span><span class="no">application-credential-id=&quot;{{ $app_cred_id }}&quot;</span>
<span class="w">        </span><span class="no">{{- end }}</span>

<span class="w">        </span><span class="no">{{- if $app_cred_name }}</span>
<span class="w">        </span><span class="no">application-credential-name=&quot;{{ $app_cred_name }}&quot;</span>
<span class="w">        </span><span class="no">{{- end }}</span>

<span class="w">        </span><span class="no">{{- if $app_cred_secret }}</span>
<span class="w">        </span><span class="no">application-credential-secret=&quot;{{ $app_cred_secret }}&quot;</span>
<span class="w">        </span><span class="no">{{- end }}</span>

<span class="w">        </span><span class="no">{{- if and (not $app_cred_id) (not $app_cred_secret) }}</span>
<span class="w">        </span><span class="no">username=&quot;{{ index $openstack &quot;username&quot; }}&quot;</span>
<span class="w">        </span><span class="no">password=&quot;{{ index $openstack &quot;password&quot; }}&quot;</span>
<span class="w">        </span><span class="no">{{- end }}</span>
<span class="w">        </span><span class="no">region=&quot;{{ index $openstack &quot;region_name&quot; }}&quot;</span>

<span class="w">        </span><span class="no">[LoadBalancer]</span>
<span class="w">        </span><span class="no">{{- if $network_id }}</span>
<span class="w">        </span><span class="no">floating-network-id=&quot;{{ $network_id }}&quot;</span>
<span class="w">        </span><span class="no">{{- end }}</span>

<span class="w">        </span><span class="no">[Network]</span>
<span class="w">        </span><span class="no">{{- if $network_name }}</span>
<span class="w">        </span><span class="no">public-network-name=&quot;{{ $network_name }}&quot;</span>
<span class="w">        </span><span class="no">{{- end }}</span>
</code></pre></div>
<p>Object needs to be named <code>openstack-cluster-identity-resource-template.yaml</code>, <code>OpenStackClusterIdentity</code> object name + <code>-resource-template</code> string suffix.</p>
<p>Apply the YAML to your cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>openstack-cluster-identity-resource-template.yaml
</code></pre></div>
</li>
<li>
<p>Create Your First Child Cluster</p>
<p>To test the configuration, create a YAML file with the specification of your Managed Cluster and save it as
<code>my-openstack-cluster-deployment.yaml</code>.  Note that you can see the available templates by listing them:</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>clustertemplate<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">NAME                            VALID</span>
<span class="go">adopted-cluster-0-1-0           true</span>
<span class="go">aws-eks-0-1-0                   true</span>
<span class="go">aws-hosted-cp-0-1-0             true</span>
<span class="go">aws-standalone-cp-0-1-0         true</span>
<span class="go">azure-aks-0-1-0                 true</span>
<span class="go">azure-hosted-cp-0-1-0           true</span>
<span class="go">azure-standalone-cp-0-1-0       true</span>
<span class="go">openstack-standalone-cp-0-1-0   true</span>
<span class="go">vsphere-hosted-cp-0-1-0         true</span>
<span class="go">vsphere-standalone-cp-0-1-0     true</span>
</code></pre></div></p>
<p>The <code>ClusterDeployment</code> should look something like this:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0rdent.mirantis.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterDeployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-openstack-cluster-deployment</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openstack-standalone-cp-0-1-0</span>
<span class="w">  </span><span class="nt">credential</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openstack-cluster-identity-cred</span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span>
<span class="w">    </span><span class="nt">clusterLabels</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">controlPlaneNumber</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">workersNumber</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">controlPlane</span><span class="p">:</span>
<span class="w">      </span><span class="nt">flavor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">m1.medium</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span>
<span class="w">        </span><span class="nt">filter</span><span class="p">:</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-22.04-x86_64</span>
<span class="w">    </span><span class="nt">worker</span><span class="p">:</span>
<span class="w">      </span><span class="nt">flavor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">m1.medium</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span>
<span class="w">        </span><span class="nt">filter</span><span class="p">:</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-22.04-x86_64</span>
<span class="w">    </span><span class="nt">externalNetwork</span><span class="p">:</span>
<span class="w">      </span><span class="nt">filter</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;public&quot;</span>
<span class="w">    </span><span class="nt">authURL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${OS_AUTH_URL}</span>
<span class="w">    </span><span class="nt">identityRef</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;openstack-cloud-config&quot;</span>
<span class="w">      </span><span class="nt">cloudName</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;openstack&quot;</span>
<span class="w">      </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${OS_REGION_NAME}</span>
</code></pre></div>
<p>You can adjust <code>flavor</code>, <code>image name</code>, <code>region name</code>, and <code>authURL</code> to match your OpenStack environment. For more information about the configuration options, see the <a href="../template-openstack/">OpenStack Template Parameters Reference</a>.</p>
<p>Apply the YAML to your management cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>my-openstack-cluster-deployment.yaml
</code></pre></div>
<p>This will trigger the provisioning process where k0rdent will create a bunch of OpenStack resources such as OpenStackCluster, OpenStackMachineTemplate, OpenStackMachineDeployment, etc. You can follow the
provisioning process:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>-n<span class="w"> </span>kcm-system<span class="w"> </span>get<span class="w"> </span>clusterdeployment.k0rdent.mirantis.com<span class="w"> </span>my-openstack-cluster-deployment<span class="w"> </span>--watch
</code></pre></div>
<p>After the cluster is <code>Ready</code>, you can access it via the kubeconfig, just like any other Kubernetes cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>-n<span class="w"> </span>kcm-system<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>my-openstack-cluster-deployment-kubeconfig<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.value&gt;&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d<span class="w"> </span>&gt;<span class="w"> </span>my-openstack-cluster-deployment-kubeconfig.kubeconfig
<span class="nv">KUBECONFIG</span><span class="o">=</span><span class="s2">&quot;my-openstack-cluster-deployment-kubeconfig.kubeconfig&quot;</span><span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-A
</code></pre></div>
</li>
<li>
<p>Cleanup</p>
<p>To clean up OpenStack resources, delete the managed cluster by deleting the <code>ClusterDeployment</code>:</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>clusterdeployments<span class="w"> </span>-A
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">NAMESPACE    NAME                          READY   STATUS</span>
<span class="go">kcm-system   my-openstack-cluster-deployment   True    ClusterDeployment is ready</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>delete<span class="w"> </span>clusterdeployments<span class="w"> </span>my-openstack-cluster-deployment<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">clusterdeployment.k0rdent.mirantis.com &quot;my-openstack-cluster-deployment&quot; deleted</span>
</code></pre></div></p>
</li>
</ol>
<h2 id="vsphere">vSphere<a class="headerlink" href="#vsphere" title="Permanent link">#</a></h2>
<p>To enable users to deploy child clusers on vSphere, follow these steps:</p>
<ol>
<li>
<p>Create a k0rdent management cluster</p>
<p>Follow the instructions in <a href="../admin-installation/">Install k0rdent</a> to create a management cluster with k0rdent running, as well as a local install of <code>kubectl</code>.</p>
</li>
<li>
<p>Install a vSphere instance version <code>6.7.0</code> or higher.</p>
</li>
<li>
<p>Create a vSphere account with appropriate privileges</p>
<p>To function properly, the user assigned to the vSphere Provider should be able
to manipulate vSphere resources. The user should have the following 
required privileges:</p>
<div class="highlight"><pre><span></span><code>Virtual<span class="w"> </span>machine:<span class="w"> </span>Full<span class="w"> </span>permissions<span class="w"> </span>are<span class="w"> </span>required
Network:<span class="w"> </span>Assign<span class="w"> </span>network<span class="w"> </span>is<span class="w"> </span>sufficient
Datastore:<span class="w"> </span>The<span class="w"> </span>user<span class="w"> </span>should<span class="w"> </span>be<span class="w"> </span>able<span class="w"> </span>to<span class="w"> </span>manipulate<span class="w"> </span>virtual<span class="w"> </span>machine<span class="w"> </span>files<span class="w"> </span>and<span class="w"> </span>metadata
</code></pre></div>
<p>In addition to that, specific CSI driver permissions are required. See
<a href="https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/2.0/vmware-vsphere-csp-getting-started/GUID-0AB6E692-AA47-4B6A-8CEA-38B754E16567.html">the official doc</a>
for more information on CSI-specific permissions.</p>
</li>
<li>
<p>Image template</p>
<p>You can use pre-built image templates from the
<a href="https://github.com/kubernetes-sigs/cluster-api-provider-vsphere/blob/main/README.md#kubernetes-versions-with-published-ovas">CAPV project</a>
or build your own.</p>
<p>When building your own image, make sure that VMware tools and cloud-init are
installed and properly configured.</p>
<p>You can follow the <a href="https://docs.vmware.com/en/VMware-Tools/11.0.0/com.vmware.vsphere.vmwaretools.doc/GUID-C48E1F14-240D-4DD1-8D4C-25B6EBE4BB0F.html">official open-vm-tools guide</a>
on how to correctly install VMware tools.</p>
<p>When setting up cloud-init, you can refer to the <a href="https://cloudinit.readthedocs.io/en/latest/index.html">official docs</a>
and specifically the <a href="https://cloudinit.readthedocs.io/en/latest/reference/datasources/vmware.html">VMware datasource docs</a>
for extended information regarding cloud-init on vSphere.</p>
</li>
<li>
<p>vSphere network</p>
<p>When creating a network, make sure that it has the DHCP service.</p>
<p>Also, ensure that part of your network is out of the DHCP range (for example, the network
<code>172.16.0.0/24</code> should have a DHCP range of <code>172.16.0.100-172.16.0.254</code> only) so that LoadBalancer services will not create any IP conflicts in the
network.</p>
</li>
<li>
<p>vSphere Credentials</p>
<p>To enable k0rdent to access vSphere resources, create the appropriate credentials objects. For a full explanation of how <code>Credential</code> objects work, see the <a href="../admin-credentials/">main Credentials chapter</a>, but for now, follow these steps:</p>
<p>Create a <code>Secret</code> object with the username and password</p>
<p>The <code>Secret</code> stores the username and password for your vSphere instance. Save the <code>Secret</code> YAML in a file named <code>vsphere-cluster-identity-secret.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vsphere-cluster-identity-secret</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">k0rdent.mirantis.com/component</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kcm&quot;</span>
<span class="nt">stringData</span><span class="p">:</span>
<span class="w">  </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;USERNAME&gt;</span>
<span class="w">  </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;PASSWORD&gt;</span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Opaque</span>
</code></pre></div>
<p>Apply the YAML to your cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>vsphere-cluster-identity-secret.yaml
</code></pre></div>
</li>
<li>
<p>Create the <code>VSphereClusterIdentity</code> Object</p>
<p>The <code>VSphereClusterIdentity</code> object defines the credentials CAPV will use to manage vSphere resources.</p>
<p>Save the <code>VSphereClusterIdentity</code> YAML into a file named <code>vsphere-cluster-identity.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure.cluster.x-k8s.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VSphereClusterIdentity</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vsphere-cluster-identity</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">k0rdent.mirantis.com/component</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kcm&quot;</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">secretName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vsphere-cluster-identity-secret</span>
<span class="w">  </span><span class="nt">allowedNamespaces</span><span class="p">:</span>
<span class="w">    </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">      </span><span class="nt">matchLabels</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</code></pre></div>
<p>The <code>VSphereClusterIdentity</code> object references the <code>Secret</code> you created in the previous step, so <code>.spec.secretName</code> 
needs to match the <code>.metadata.name</code> for the <code>Secret</code>.</p>
<p>Apply the YAML to your cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>vsphere-cluster-identity.yaml
</code></pre></div>
</li>
<li>
<p>Create the <code>Credential</code> Object</p>
<p>Create a YAML with the specification of our credential and save it as
<code>vsphere-cluster-identity-cred.yaml</code></p>
<p><div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0rdent.mirantis.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Credential</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vsphere-cluster-identity-cred</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">identityRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure.cluster.x-k8s.io/v1beta1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VSphereClusterIdentity</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vsphere-cluster-identity</span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
</code></pre></div>
Again, <code>.spec.identityRef.name</code> must match the <code>.metadata.name</code> of the <code>VSphereClusterIdentity</code> object you just created.</p>
<p>Apply the YAML to your cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>vsphere-cluster-identity-cred.yaml
</code></pre></div>
</li>
<li>
<p>Create the <code>ConfigMap</code> resource-template Object</p>
<p>Create a YAML with the specification of our resource-template and save it as
<code>vsphere-cluster-identity-resource-template.yaml</code></p>
<p><div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vsphere-cluster-identity-resource-template</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">k0rdent.mirantis.com/component</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kcm&quot;</span>
<span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nt">projectsveltos.io/template</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">configmap.yaml</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">{{- $cluster := .InfrastructureProvider -}}</span>
<span class="w">    </span><span class="no">{{- $identity := (getResource &quot;InfrastructureProviderIdentity&quot;) -}}</span>
<span class="w">    </span><span class="no">{{- $secret := (getResource &quot;InfrastructureProviderIdentitySecret&quot;) -}}</span>
<span class="w">    </span><span class="no">---</span>
<span class="w">    </span><span class="no">apiVersion: v1</span>
<span class="w">    </span><span class="no">kind: Secret</span>
<span class="w">    </span><span class="no">metadata:</span>
<span class="w">      </span><span class="no">name: vsphere-cloud-secret</span>
<span class="w">      </span><span class="no">namespace: kube-system</span>
<span class="w">    </span><span class="no">type: Opaque</span>
<span class="w">    </span><span class="no">data:</span>
<span class="w">      </span><span class="no">{{ printf &quot;%s.username&quot; $cluster.spec.server }}: {{ index $secret.data &quot;username&quot; }}</span>
<span class="w">      </span><span class="no">{{ printf &quot;%s.password&quot; $cluster.spec.server }}: {{ index $secret.data &quot;password&quot; }}</span>
<span class="w">    </span><span class="no">---</span>
<span class="w">    </span><span class="no">apiVersion: v1</span>
<span class="w">    </span><span class="no">kind: Secret</span>
<span class="w">    </span><span class="no">metadata:</span>
<span class="w">      </span><span class="no">name: vcenter-config-secret</span>
<span class="w">      </span><span class="no">namespace: kube-system</span>
<span class="w">    </span><span class="no">type: Opaque</span>
<span class="w">    </span><span class="no">stringData:</span>
<span class="w">      </span><span class="no">csi-vsphere.conf: |</span>
<span class="w">        </span><span class="no">[Global]</span>
<span class="w">        </span><span class="no">cluster-id = &quot;{{ $cluster.metadata.name }}&quot;</span>

<span class="w">        </span><span class="no">[VirtualCenter &quot;{{ $cluster.spec.server }}&quot;]</span>
<span class="w">        </span><span class="no">insecure-flag = &quot;true&quot;</span>
<span class="w">        </span><span class="no">user = &quot;{{ index $secret.data &quot;username&quot; | b64dec }}&quot;</span>
<span class="w">        </span><span class="no">password = &quot;{{ index $secret.data &quot;password&quot; | b64dec }}&quot;</span>
<span class="w">        </span><span class="no">port = &quot;443&quot;</span>
<span class="w">        </span><span class="no">datacenters = ${VSPHERE_DATACENTER}</span>
<span class="w">    </span><span class="no">---</span>
<span class="w">    </span><span class="no">apiVersion: v1</span>
<span class="w">    </span><span class="no">kind: ConfigMap</span>
<span class="w">    </span><span class="no">metadata:</span>
<span class="w">      </span><span class="no">name: cloud-config</span>
<span class="w">      </span><span class="no">namespace: kube-system</span>
<span class="w">    </span><span class="no">data:</span>
<span class="w">      </span><span class="no">vsphere.conf: |</span>
<span class="w">        </span><span class="no">global:</span>
<span class="w">          </span><span class="no">insecureFlag: true</span>
<span class="w">          </span><span class="no">port: 443</span>
<span class="w">          </span><span class="no">secretName: vsphere-cloud-secret</span>
<span class="w">          </span><span class="no">secretNamespace: kube-system</span>
<span class="w">        </span><span class="no">labels:</span>
<span class="w">          </span><span class="no">region: k8s-region</span>
<span class="w">          </span><span class="no">zone: k8s-zone</span>
<span class="w">        </span><span class="no">vcenter:</span>
<span class="w">          </span><span class="no">{{ $cluster.spec.server }}:</span>
<span class="w">            </span><span class="no">datacenters:</span>
<span class="w">              </span><span class="no">- ${VSPHERE_DATACENTER}</span>
<span class="w">            </span><span class="no">server: {{ $cluster.spec.server }}</span>
</code></pre></div>
Object name needs to be exactly <code>vsphere-cluster-identity-resource-template</code>, <code>VSphereClusterIdentity</code> object name + <code>-resource-template</code> string suffix.</p>
<p>Apply the YAML to your cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>vsphere-cluster-identity-resource-template.yaml
</code></pre></div>
</li>
<li>
<p>Create your first Cluster Deployment</p>
<p>Test the configuration by deploying a cluster. Create a YAML document with the specification of your Cluster Deployment and save it as <code>my-vsphere-clusterdeployment1.yaml</code>.</p>
<p>You can get a list of available templates:</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>clustertemplate<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">NAME                            VALID</span>
<span class="go">adopted-cluster-0-1-0           true</span>
<span class="go">aws-eks-0-1-0                   true</span>
<span class="go">aws-hosted-cp-0-1-0             true</span>
<span class="go">aws-standalone-cp-0-1-0         true</span>
<span class="go">azure-aks-0-1-0                 true</span>
<span class="go">azure-hosted-cp-0-1-0           true</span>
<span class="go">azure-standalone-cp-0-1-0       true</span>
<span class="go">openstack-standalone-cp-0-1-0   true</span>
<span class="go">vsphere-hosted-cp-0-1-0         true</span>
<span class="go">vsphere-standalone-cp-0-1-0     true</span>
</code></pre></div></p>
<p>The <code>ClusterDeployment</code> YAML file should look something like this. Make sure to replace the placeholders with your
specific information:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0rdent.mirantis.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterDeployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-vsphere-clusterdeployment1</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vsphere-standalone-cp-0-1-0</span>
<span class="w">  </span><span class="nt">credential</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vsphere-cluster-identity-cred</span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span>
<span class="w">    </span><span class="nt">clusterLabels</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="nt">controlPlaneNumber</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">workersNumber</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">vsphere</span><span class="p">:</span>
<span class="w">      </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_SERVER&gt;</span>
<span class="w">      </span><span class="nt">thumbprint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_THUMBPRINT&gt;</span>
<span class="w">      </span><span class="nt">datacenter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_DATACENTER&gt;</span>
<span class="w">      </span><span class="nt">datastore</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_DATASTORE&gt;</span>
<span class="w">      </span><span class="nt">resourcePool</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_RESOURCEPOOL&gt;</span>
<span class="w">      </span><span class="nt">folder</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_FOLDER&gt;</span>
<span class="w">      </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${VSPHERE_USER}</span>
<span class="w">      </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${VSPHERE_PASSWORD}</span>
<span class="w">    </span><span class="nt">controlPlaneEndpointIP</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_CONTROL_PLANE_ENDPOINT&gt;</span>
<span class="w">    </span><span class="nt">controlPlane</span><span class="p">:</span>
<span class="w">      </span><span class="nt">ssh</span><span class="p">:</span>
<span class="w">        </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu</span>
<span class="w">        </span><span class="nt">publicKey</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_SSH_KEY&gt;</span>
<span class="w">      </span><span class="nt">rootVolumeSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
<span class="w">      </span><span class="nt">cpus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">      </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4096</span>
<span class="w">      </span><span class="nt">vmTemplate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_VM_TEMPLATE&gt;</span>
<span class="w">      </span><span class="nt">network</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_NETWORK&gt;</span>
<span class="w">    </span><span class="nt">worker</span><span class="p">:</span>
<span class="w">      </span><span class="nt">ssh</span><span class="p">:</span>
<span class="w">        </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu</span>
<span class="w">        </span><span class="nt">publicKey</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_SSH_KEY&gt;</span>
<span class="w">      </span><span class="nt">rootVolumeSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
<span class="w">      </span><span class="nt">cpus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">      </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4096</span>
<span class="w">      </span><span class="nt">vmTemplate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_VM_TEMPLATE&gt;</span>
<span class="w">      </span><span class="nt">network</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_NETWORK&gt;</span>
</code></pre></div>
<p>For more information about the available configuration options, see the <a href="../template-openstack/">vSphere Template Parameters</a>.</p>
<p>Apply the YAML to your management cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>my-vsphere-clusterdeployment1.yaml
</code></pre></div>
<p>There will be a delay as the cluster finishes provisioning. Follow the
provisioning process with the following command:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>-n<span class="w"> </span>kcm-system<span class="w"> </span>get<span class="w"> </span>clusterdeployment.k0rdent.mirantis.com<span class="w"> </span>my-vsphere-clusterdeployment1<span class="w"> </span>--watch
</code></pre></div>
<p>After the cluster is <code>Ready</code>, you can access it via the kubeconfig, like this:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>-n<span class="w"> </span>kcm-system<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>my-vsphere-clusterdeployment1-kubeconfig<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.value}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d<span class="w"> </span>&gt;<span class="w"> </span>my-vsphere-clusterdeployment1-kubeconfig.kubeconfig
<span class="nv">KUBECONFIG</span><span class="o">=</span><span class="s2">&quot;my-vsphere-clusterdeployment1-kubeconfig.kubeconfig&quot;</span><span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-A
</code></pre></div>
</li>
<li>
<p>Cleanup</p>
<p>To delete the provisioned cluster and free consumed vSphere resources run:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>-n<span class="w"> </span>kcm-system<span class="w"> </span>delete<span class="w"> </span>cluster<span class="w"> </span>my-vsphere-clusterdeployment1
</code></pre></div>
</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 The k0rdent authors | Documentation distributed under <a href="https://creativecommons.org/licenses/by/4.0/legalcode.txt">CC-BY-4.0</a>.
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k0rdent/kcm" target="_blank" rel="noopener" title="k0rdent on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://x.com/k0rdent" target="_blank" rel="noopener" title="k0rdent on X" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://bsky.app/profile/k0rdent.bsky.social" target="_blank" rel="noopener" title="k0rdent on BlueSky" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M111.8 62.2C170.2 105.9 233 194.7 256 242.4c23-47.6 85.8-136.4 144.2-180.2 42.1-31.6 110.3-56 110.3 21.8 0 15.5-8.9 130.5-14.1 149.2-18.2 64.8-84.4 81.4-143.3 71.3C456 322 482.2 380 425.6 438c-107.4 110.2-154.3-27.6-166.3-62.9-1.7-4.9-2.6-7.8-3.3-7.8s-1.6 3-3.3 7.8c-12 35.3-59 173.1-166.3 62.9-56.5-58-30.4-116 72.5-133.5C100 314.6 33.8 298 15.7 233.1 10.4 214.4 1.5 99.4 1.5 83.9c0-77.8 68.2-53.4 110.3-21.8z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.youtube.com/channel/UChXQ6kbvjnAtdZAQpl7Fo4A" target="_blank" rel="noopener" title="k0rdent on YouTube" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.linkedin.com/company/k0rdent/" target="_blank" rel="noopener" title="k0rdent on LinkedIn" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["toc.autohide", "search.suggest", "search.highlight", "content.code.copy"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>